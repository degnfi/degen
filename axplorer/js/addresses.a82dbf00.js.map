{"version":3,"sources":["webpack:///./src/components/Address/AddressDataTable.vue?18e1","webpack:///./src/views/Addresses.vue?5f7f","webpack:///./src/components/Address/AddressDataTable.vue?5fe5","webpack:///./src/components/Address/AddressDataTable.vue","webpack:///./src/components/Address/AddressDataTable.vue?f5ff","webpack:///./src/components/Address/AddressDataTable.vue?9305","webpack:///./src/views/Addresses.vue","webpack:///./src/views/Addresses.vue?0354","webpack:///./src/views/Addresses.vue?265e","webpack:///./src/components/Address/AddressDataTable.vue?7310","webpack:///./src/js/Address.ts","webpack:///./src/views/Addresses.vue?7fa5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","totalAddresses","toLocaleString","_f","loading","assetsLoaded","key","attrs","addressesList","staticRenderFns","title","_e","addresses","headers","scopedSlots","_u","fn","ref","item","address","avaxBalance","text","value","components","component","VCard","VCardTitle","VDataTable","VSpacer","get","then","res","data","count","sorted","Object","values","map","addressData","publicKey","assets","totalTransactionCount","totalUtxoCount","assetsMap","Address","sort","a","b","diff","minus","gt","lt","$store","state","AddressDataTable","filters","pluralize","val","VProgressCircular","setBalances","setAVAXBalance","balanceData","balances","assetID","balanceDatum","balance","id","name","denomination","symbol","currentSupply","totalReceived","totalSent","proportionOfCurrentSupply","transactionCount","utxoCount","asset","setAssetMetadata","setBalanceData","Math","round","parseInt","toString","console","log","getAssetDescription","push","result","find"],"mappings":"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","file":"js/addresses.a82dbf00.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=style&index=0&id=489ec79a&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=style&index=0&id=489ec79a&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addresses\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"header\"},[_c('h2',[_vm._v(\"Addresses\")]),[_c('div',{staticClass:\"bar\"},[_c('p',{staticClass:\"count\"},[_vm._v(_vm._s(_vm.totalAddresses.toLocaleString())+\" \"+_vm._s(_vm._f(\"pluralize\")(_vm.totalAddresses))+\" found\")])])]],2),(_vm.loading && !_vm.assetsLoaded)?[_c('v-progress-circular',{key:\"1\",attrs:{\"size\":16,\"width\":2,\"color\":\"#E84970\",\"indeterminate\":\"\"}})]:[_c('AddressDataTable',{attrs:{\"addresses\":_vm.addressesList,\"links\":true}})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"id\":\"address_data_table\"}},[(_vm.title)?_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.title)+\" \"),_c('v-spacer')],1):_vm._e(),_c('v-data-table',{attrs:{\"items\":_vm.addresses,\"headers\":_vm.headers,\"multi-sort\":\"\"},scopedSlots:_vm._u([{key:\"item.address\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[(_vm.links)?[_c('router-link',{staticClass:\"id\",attrs:{\"to\":(\"/address/\" + (item.address))}},[_vm._v(_vm._s(item.address))])]:[_vm._v(_vm._s(item.address))]],2)]}},{key:\"item.avaxBalance\",fn:function(ref){\nvar item = ref.item;\nreturn [_vm._v(\" \"+_vm._s(item.avaxBalance)+\" \")]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport \"reflect-metadata\";\nimport { Vue, Component, Prop } from \"vue-property-decorator\";\nimport { VMMap, VMDocumentationMap, trimmedLocaleString } from \"@/helper\";\nimport { IAddress, IBalance } from '@/js/IAddress';\nimport Address from '@/js/Address';\nimport { Asset } from '@/js/Asset';\n\n@Component({\n    components: {\n    }\n})\nexport default class AddressDataTable extends Vue {\n    @Prop() addresses!: Address[];\n    @Prop() links?: boolean;\n    @Prop() title?: string;\n\n    get headers(): any[] {\n        return [\n            { text: \"Address\", value: \"address\" },\n            { text: \"AVAX Balance\", value: \"avaxBalance\" },\n        ];\n    }    \n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AddressDataTable.vue?vue&type=template&id=489ec79a&scoped=true&\"\nimport script from \"./AddressDataTable.vue?vue&type=script&lang=ts&\"\nexport * from \"./AddressDataTable.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./AddressDataTable.vue?vue&type=style&index=0&id=489ec79a&scoped=true&lang=scss&\"\nimport style1 from \"./AddressDataTable.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"489ec79a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardTitle,VDataTable,VSpacer})\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Vue, Component } from \"vue-property-decorator\";\nimport api from \"@/axios\";\nimport Address from \"@/js/Address\";\nimport { IAddress, IAddressData, IBalance } from '@/js/IAddress';\nimport Big from \"big.js\";\nimport AddressDataTable from '@/components/Address/AddressDataTable.vue';\n\n@Component({\n    components: {\n        AddressDataTable\n    },\n    filters: {\n        pluralize(val: number): string {\n            return val === 0\n                ? `addresses`\n                : val > 1\n                ? `addresses`\n                : `address`;\n        }\n    }\n})\n\nexport default class Addresses extends Vue {\n    loading: boolean = true;\n    addressesList: IAddress[] = [];\n    totalAddresses: number = 0;\n\n    async created() {\n        this.loading = false;\n        // TODO: support service for multiple chains\n        api.get(\"/x/addresses\").then(res => {\n            this.totalAddresses = res.data.count            \n            let addresses: IAddressData = res.data.addresses;\n\n            // TODO: unique addresses or sort in API\n            // let addressesMap: {[key:string]: IAddressData} = {};\n            // for (let i = 0; i < addresses.length; i++) {\n            //     let addressID = addresses[i].address;\n            //     if (addressesMap[addressID]) {\n            //         console.log(\"redundant Address\", addressID);\n            //     } else {\n            //         addressesMap[addressID] = addresses[i];\n            //     }\n            // }\n            // let sorted = Object.values(addressesMap).map((addressData: IAddressData) => {\n            \n            let sorted = Object.values(addresses).map((addressData: IAddressData) => {\n                let address: IAddress = {\n                    address: addressData.address,\n                    publicKey: addressData.publicKey,\n                    assets: [],\n                    avaxBalance: Big(0),\n                    totalTransactionCount: 0,\n                    totalUtxoCount: 0\n                }\n\n                if (this.assetsMap) {\n                    address = new Address(addressData, this.assetsMap);\n                }\n                \n                return address;\n            });\n            sorted.sort((a: IAddress, b: IAddress) => {\n                let diff = a.avaxBalance.minus(b.avaxBalance);\n                if (diff.gt(0)) return -1;\n                else if (diff.lt(0)) return 1;\n                else return 0;\n            });\n            this.addressesList = sorted;\n        });\n    }\n\n    get assetsMap() {\n        return this.$store.state.assets;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Addresses.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-2!../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Addresses.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Addresses.vue?vue&type=template&id=750199f8&scoped=true&\"\nimport script from \"./Addresses.vue?vue&type=script&lang=ts&\"\nexport * from \"./Addresses.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Addresses.vue?vue&type=style&index=0&id=750199f8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"750199f8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VProgressCircular})\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddressDataTable.vue?vue&type=style&index=1&lang=scss&\"","import { IBalanceData, IBalanceDatum, IBalance, IAddressData } from \"./IAddress\";\nimport { stringToBig } from \"@/helper\";\nimport { Asset } from './Asset';\nimport Big from \"big.js\";\nimport api from \"@/axios\";\nimport { avm } from '@/avalanche';\nimport { AVAX_ID } from \"@/store/index\";\nimport { IAssetData_Ortelius, IAssetData_Avalanche_Go } from './IAsset';\n\ninterface IAssetsMap {\n    [key: string] : Asset;\n}\n\nexport default class Address {\n    address: string;\n    publicKey: string;\n    assets: IBalance[];\n    avaxBalance: Big;\n    totalTransactionCount: number;\n    totalUtxoCount: number\n\n    constructor(data: IAddressData, assetsMap: IAssetsMap) {\n        this.address = data.address;\n        this.publicKey = data.publicKey;\n        this.avaxBalance = Big(0);\n        this.totalTransactionCount = 0;\n        this.totalUtxoCount = 0;\n\n        this.assets = this.setBalances(data.assets, assetsMap);\n        this.setAVAXBalance();\n    }\n\n    private setBalances(balanceData: IBalanceData, assetsMap: any): IBalance[] {\n        let balances: IBalance[] = [];\n\n        /**\n         * For each balance in the address's portfolio, get and set:\n         * - asset metadata\n         * - balance data (relies on asset metadata) \n         * - balances metadata\n         */\n        for (const assetID in balanceData) {\n            let balanceDatum: IBalanceDatum = balanceData[assetID];\n            \n            // init the balance\n            let balance: IBalance = {\n                id: assetID,\n                name: \"\",\n                denomination: 0,\n                symbol: \"\",\n                currentSupply: Big(0),\n                balance: Big(balanceDatum.balance),                 // initially undenominated\n                totalReceived: Big(balanceDatum.totalReceived),     // initially undenominated\n                totalSent: Big(balanceDatum.totalSent),             // initially undenominated\n                proportionOfCurrentSupply: 0,\n                transactionCount: balanceDatum.transactionCount,\n                utxoCount: balanceDatum.utxoCount\n            };\n\n            // If asset exists in store\n            if (assetsMap[assetID]) {\n                let asset: Asset = assetsMap[assetID];\n                \n                this.setAssetMetadata(asset, balance);\n                this.setBalanceData(balanceDatum, balance.denomination, balance);\n                balance.currentSupply = asset.currentSupply;\n                balance.proportionOfCurrentSupply = Math.round(((parseInt(balanceDatum.balance) / parseInt(asset.currentSupply.toString())) * 100));\n            }\n\n            // If asset does not exist in store\n            if (!assetsMap[assetID]) {\n                // Try Ortelius\n                api.get(`/x/assets/${assetID}`).then(res => {\n                    if (res.data) {\n                        console.log(\"FOUND ASSET IN ORTELIUS\", res.data);\n                        let asset: IAssetData_Ortelius = res.data;\n                        \n                        this.setAssetMetadata(asset, balance);\n                        this.setBalanceData(balanceDatum, balance.denomination, balance);                        \n                        balance.currentSupply = stringToBig(asset.currentSupply, balance.denomination);\n                        balance.proportionOfCurrentSupply = Math.round(((parseInt(balanceDatum.balance) / parseInt(\"0\")) * 100));\n\n                    } else if (!res.data) {\n                        // Try Avalanche-Go as last resort\n                        avm.getAssetDescription(assetID).then((res: IAssetData_Avalanche_Go) => {\n                            if (res) {        \n                                console.log(\"FOUND ASSET IN GECKO\", res);\n                                let asset = res;\n                                \n                                this.setAssetMetadata(asset, balance);\n                                this.setBalanceData(balanceDatum, balance.denomination, balance);\n                                balance.currentSupply = stringToBig(\"0\", balance.denomination);                              \n                                balance.proportionOfCurrentSupply = Math.round(((parseInt(balanceDatum.balance) / parseInt(\"0\")) * 100));\n\n                            }\n                        });\n                    }\n                });\n                \n            }\n            \n            balances.push(balance);\n            \n            // update balances metadata\n            this.totalTransactionCount += balance.transactionCount;\n            this.totalUtxoCount += balance.utxoCount;            \n        }\n\n        return balances;\n    }\n    \n    // set asset metadata for convenience\n    private setAssetMetadata(asset: Asset | IAssetData_Ortelius | IAssetData_Avalanche_Go, balance: IBalance) {\n        balance.name = asset.name;\n        balance.denomination = asset.denomination;\n        balance.symbol = asset.symbol;\n    }\n    \n    // set balance data (relies on asset metadata) \n    private setBalanceData(balanceDatum: IBalanceDatum, denomination: number, balance: IBalance) {\n        balance.balance = stringToBig(balanceDatum.balance, denomination);\n        balance.totalReceived = stringToBig(balanceDatum.totalReceived, denomination);\n        balance.totalSent = stringToBig(balanceDatum.totalSent, denomination);\n    }\n\n    private setAVAXBalance(): void {\n        let result = this.assets.find(asset => asset.id === AVAX_ID);\n        if (result) {\n            this.avaxBalance = result.balance;\n        }\n    }\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Addresses.vue?vue&type=style&index=0&id=750199f8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vuetify-loader/lib/loader.js??ref--20-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Addresses.vue?vue&type=style&index=0&id=750199f8&scoped=true&lang=scss&\""],"sourceRoot":""}